<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="backup">Backup - POS</title>
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <div class="language-switcher">
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="ar">AR</button>
  </div>

  <div class="app">
    <aside class="sidebar">
      <div class="sidebar-header" data-i18n="backup">Backup</div>
      <nav>
        <a href="pos.html" class="nav-item active" data-i18n="nav_pos">ğŸ›’ Point of Sale</a>
        <a href="products.html" class="nav-item" data-i18n="nav_products">ğŸ“¦ Products</a>
        <a href="receipts.html" class="nav-item" data-i18n="nav_receipts">ğŸ§¾ Receipts</a>
        <a href="reports.html" class="nav-item" data-i18n="nav_reports">ğŸ“ˆ Reports</a>
        <a href="salesmen.html" class="nav-item active" data-i18n-key="nav_salesmen" data-i18n-ar="Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙˆÙ†">ğŸ§‘â€ğŸ’¼
          Salesmen</a>
        <a href="admin.html" class="nav-item" id="adminNavItem" style="display:none;" data-i18n="nav_admin">âš™ï¸ Admin
          Panel</a>
        <a href="backup.html" class="nav-item" data-i18n="nav_reports">ğŸ“ˆ Reports</a>
      </nav>
      <div class="sidebar-footer">Tasgheel POS</div>
    </aside>

    <main class="main-content">
      <header class="top-bar">
        <h1 data-i18n="backup">Backup</h1>
      </header>

      <section class="content-area">
        <div class="card">
          <h2 data-i18n="create_backup">ğŸ“¥ Create Backup</h2>
          <p data-i18n="create_backup_desc">Download a full backup of your current data.</p>
          <button onclick="createBackup()" class="btn btn-primary" data-i18n="create_backup_btn">ğŸ’¾ Download
            Backup</button>
        </div>

        <div class="card mt-20">
          <h2 data-i18n="restore_backup">ğŸ“¤ Restore Backup</h2>
          <p data-i18n="restore_backup_desc">Warning: Restoring will overwrite your current data!</p>
          <input type="file" id="backupFileInput" accept=".json">
          <button onclick="restoreBackup()" class="btn btn-danger mt-10" data-i18n="restore_backup_btn">âš ï¸ Restore
            Backup</button>
        </div>
      </section>
    </main>
  </div>

  <footer class="footer">
    Tashgheel POSÂ© 2025 - Designed and developed by <strong>itqan</strong> |
    <a href="tel:+201126522373">+201126522373 / +201155253886</a>
  </footer>


  <script src="js/auth.js"></script>
  <script src="js/translations.js"></script>
  <script src="js/backup-system.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const currentUser = JSON.parse(localStorage.getItem('currentUser'));
      if (currentUser?.role === 'cashier') {
        alert('Access denied');
        window.location.href = 'pos.html';
        return;
      }

      const lang = localStorage.getItem('pos_language') || 'en';
      document.body.dir = lang === 'ar' ? 'rtl' : 'ltr';
      document.documentElement.setAttribute("dir", lang === 'ar' ? 'rtl' : 'ltr');
      document.documentElement.setAttribute("lang", lang);

      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const selectedLang = btn.dataset.lang;
          localStorage.setItem('pos_language', selectedLang);
          location.reload();
        });
      });
    });
  </script>
</body>

</html>